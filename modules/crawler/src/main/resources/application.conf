ktor {
  deployment {
    port = 8080
    port = ${?CRAWLER_PORT}
    watch = [ modules.crawler ]
  }

  application {
    modules = [ dev.staticvar.mcp.crawler.server.CrawlerServerKt.main ]
  }

  security {
    session {
      cookie.name = "mcp_crawler_session"
      cookie.httpOnly = true
      cookie.secure = false # set true when serving over HTTPS
      cookie.maxAge = 10800
    }
  }
}

crawler {
  auth {
    username = "admin"
    username = ${?CRAWLER_AUTH_USERNAME}
    password-bcrypt = "$2a$12$zgLQbn7GZlf1qnUxQuFQ8OzM.NMBvvXVbh3S7gi934P1OxNmVP9xW" # bcrypt for "changeme"
    password-bcrypt = ${?CRAWLER_AUTH_PASSWORD_BCRYPT}
  }

  session {
    secret = "replace-with-32-byte-secret"
    secret = ${?CRAWLER_SESSION_SECRET}
  }

  indexer {
    base-url = "http://localhost:8081"
    base-url = ${?CRAWLER_INDEXER_BASE_URL}
  }
}
